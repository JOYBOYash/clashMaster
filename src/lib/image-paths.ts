
/**
 * @fileOverview Centralized manifest for all static image assets.
 */

export const defaultImagePath = 'https://placehold.co/128x128.png';

export const nameToPathMap: Record<string, string> = {
    // Defenses
    'Cannon': '/assets/_defenses/cannon/Cannon_1.png',
    'Archer Tower': '/assets/_defenses/archer-tower/Archer_Tower_1.png',
    'Mortar': '/assets/_defenses/mortar/Mortar_1.png',
    'Air Defense': '/assets/_defenses/air-defense/Air_Defense_1.png',
    'Wizard Tower': '/assets/_defenses/wizard-tower/Wizard_Tower_1.png',
    'Air Sweeper': '/assets/_defenses/air-sweeper/Air_Sweeper_1.png',
    'Hidden Tesla': '/assets/_defenses/hidden-tesla/Hidden_Tesla_1.png',
    'Bomb Tower': '/assets/_defenses/bomb-tower/Bomb_Tower_1.png',
    'X-Bow': '/assets/_defenses/x-bow/X-Bow_1.png',
    'Inferno Tower': '/assets/_defenses/inferno-tower/Inferno_Tower_1.png',
    'Eagle Artillery': '/assets/_defenses/eagle-artillery/Eagle_Artillery_1.png',
    'Scattershot': '/assets/_defenses/scattershot/Scattershot_1.png',
    'Spell Tower': '/assets/_defenses/spell-tower/Spell_Tower_1.png',
    'Monolith': '/assets/_defenses/monolith/Monolith_1.png',
    'Ricochet Cannon': '/assets/_defenses/ricochet-cannon/Ricochet_Cannon_1.png',
    'Multi-Archer Tower': '/assets/_defenses/multi-archer-tower/Multi-Archer_Tower_1.png',
    'Wall': '/assets/_buildings/walls/Wall_1.png',
    
    // Resources
    'Gold Mine': '/assets/_resources/collectors/gold-mines/Gold_Mine_1.png',
    'Elixir Collector': '/assets/_resources/collectors/elixir-collector/Elixir_Collector_1.png',
    'Dark Elixir Drill': '/assets/_resources/collectors/dark-elixir-drills/Dark_Elixir_Drill_1.png',
    'Gold Storage': '/assets/_resources/storages/gold-storage/Gold_Storage_1.png',
    'Elixir Storage': '/assets/_resources/storages/elixir-storage/Elixir_Storage_1.png',
    'Dark Elixir Storage': '/assets/_resources/storages/dark-elixir-storage/Dark_Elixir_Storage_1.png',

    // Army
    'Army Camp': '/assets/_buildings/army-camp/Army_Camp_1.png',
    'Barracks': '/assets/_buildings/barracks/Barracks_1.png',
    'Dark Barracks': '/assets/_buildings/dark-barracks/Dark_Barracks_1.png',
    'Laboratory': '/assets/_buildings/laboratory/Laboratory_1.png',
    'Spell Factory': '/assets/_buildings/spell-factory/Spell_Factory_1.png',
    'Dark Spell Factory': '/assets/_buildings/dark-spell-factory/Dark_Spell_Factory_1.png',
    'Workshop': '/assets/_buildings/workshop/Workshop_1.png',
    'Pet House': '/assets/_buildings/pet-house/Pet_House_1.png',
    'Blacksmith': '/assets/_buildings/blacksmith/Blacksmith_1.png',

    // Other
    'Town Hall': '/assets/_town-halls/Town_Hall_1.png',
    'Clan Castle': '/assets/_buildings/clan-castle/Clan_Castle_1.png',
    "Builder's Hut": '/assets/_buildings/builders-hut/Builder_s_Hut_1.png',

    // Traps
    'Bomb': '/assets/_traps/bomb/Bomb_1.png',
    'Spring Trap': '/assets/_traps/spring-trap/Spring_Trap_1.png',
    'Air Bomb': '/assets/_traps/air-bomb/Air_Bomb_1.png',
    'Giant Bomb': '/assets/_traps/giant-bomb/Giant_Bomb_1.png',
    'Seeking Air Mine': '/assets/_traps/seeking-air-mine/Seeking_Air_Mine_1.png',
    'Skeleton Trap': '/assets/_traps/skeleton-trap/Skeleton_Trap_1.png',
    'Tornado Trap': '/assets/_traps/tornado-trap/Tornado_Trap_1.png',

    // Elixir Troops
    'Archer': '/assets/_troops/elixir/archer.png',
    'Baby Dragon': '/assets/_troops/elixir/baby-dragon.png',
    'Balloon': '/assets/_troops/elixir/balloon.png',
    'Barbarian': '/assets/_troops/elixir/barbarian.png',
    'Dragon Rider': '/assets/_troops/elixir/dragon-rider.png',
    'Dragon': '/assets/_troops/elixir/dragon.png',
    'Electro Dragon': '/assets/_troops/elixir/electro-dragon.png',
    'Electro Titan': '/assets/_troops/elixir/electro-titan.png',
    'Giant': '/assets/_troops/elixir/giant.png',
    'Goblin': '/assets/_troops/elixir/goblin.png',
    'Healer': '/assets/_troops/elixir/healer.png',
    'Miner': '/assets/_troops/elixir/miner.png',
    'P.E.K.K.A': '/assets/_troops/elixir/pekka.png',
    'Root Rider': '/assets/_troops/elixir/root-rider.png',
    'Thrower': '/assets/_troops/elixir/thrower.png',
    'Wall Breaker': '/assets/_troops/elixir/wall-breaker.png',
    'Wizard': '/assets/_troops/elixir/wizard.png',
    'Yeti': '/assets/_troops/elixir/yeti.png',
    
    // Dark Elixir Troops
    'Apprentice Warden': '/assets/_troops/dark-elixir/apprentice-warden.png',
    'Bowler': '/assets/_troops/dark-elixir/bowler.png',
    'Druid': '/assets/_troops/dark-elixir/druid.png',
    'Golem': '/assets/_troops/dark-elixir/golem.png',
    'Headhunter': '/assets/_troops/dark-elixir/head-hunter.png',
    'Hog Rider': '/assets/_troops/dark-elixir/hog-rider.png',
    'Ice Golem': '/assets/_troops/dark-elixir/ice-golem.png',
    'Lava Hound': '/assets/_troops/dark-elixir/lava-hound.png',
    'Minion': '/assets/_troops/dark-elixir/minion.png',
    'Valkyrie': '/assets/_troops/dark-elixir/valkyrie.png',
    'Witch': '/assets/_troops/dark-elixir/witch.png',

    // Spells
    'Bat Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Bat.png',
    'Earthquake Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Earthquake.png',
    'Haste Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Haste.png',
    'Poison Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Poison.png',
    'Skeleton Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Skeleton.png',
    'Overgrowth Spell': '/assets/_spells/dark-elixir/Icon_HV_Dark_Spell_Overgrowth.png',
    'Clone Spell': '/assets/_spells/elixir/Icon_HV_Spell_Clone.png',
    'Freeze Spell': '/assets/_spells/elixir/Icon_HV_Spell_Freeze_new.png',
    'Healing Spell': '/assets/_spells/elixir/Icon_HV_Spell_Heal.png',
    'Invisibility Spell': '/assets/_spells/elixir/Icon_HV_Spell_Invisibility.png',
    'Jump Spell': '/assets/_spells/elixir/Icon_HV_Spell_Jump.png',
    'Lightning Spell': '/assets/_spells/elixir/Icon_HV_Spell_Lightning_new.png',
    'Rage Spell': '/assets/_spells/elixir/Icon_HV_Spell_Rage.png',
    'Recall Spell': '/assets/_spells/elixir/Icon_HV_Spell_Recall.png',
    'Revive Spell': '/assets/_spells/elixir/Icon_HV_Spell_Revive.png',
};

export const getHallImagePath = (base: 'home' | 'builder', level: number): string => {
    if (base === 'home') {
        return `/assets/_town-halls/Town_Hall_${level}.png`;
    }
    return `https://placehold.co/160x160.png`; 
};

export const getTroopImagePath = (name: string): string => {
    return nameToPathMap[name] || defaultImagePath;
};


// --- UI Asset Paths ---
export const heroAvatarAssets = [
    '/assets/_avatars/bk-avatar.png',
   '/assets/_avatars/bk-avatar2.png',
    '/assets/_avatars/mp-avatar.png',
  '/assets/_avatars/mp-avatar2.png',
  '/assets/_avatars/gw-avatar.png',
  '/assets/_avatars/aq-avatar.png',
  '/assets/_avatars/rc-avatar.png',
];

export const carouselImageAssets = [
  { src: '/assets/_login_carousel/BK_SideProfile.png', alt: 'Barbarian King' },
  { src: '/assets/_login_carousel/AQ_SideProfile.png', alt: 'Archer Queen' },
  { src: '/assets/_login_carousel/GW_SideProfile.png', alt: 'Grand Warden' },
  { src: '/assets/_login_carousel/MP_SideProfile.png', alt: 'Minion Prince' },
  { src: '/assets/_login_carousel/RC_SideProfile.png', alt: 'Royal Champion' },
];


export type FeaturedItem = {
    title: string;
    category: string;
    price: string;
    availability: string;
    imageUrl: string;
    hint: string;
};

const skinAssets: Record<string, FeaturedItem[]> = {
  'Barbarian King': [
    { title: 'Champion King', category: 'Hero Skin', price: '1500 Gems', availability: 'Shop', imageUrl: '/assets/skins/champion_king.png', hint: 'gold king armor' },
    { title: 'P.E.K.K.A King', category: 'Hero Skin', price: 'Gold Pass', availability: 'Past Season', imageUrl: '/assets/skins/pekka_king.png', hint: 'robot king sword' },
  ],
  'Archer Queen': [
    { title: 'Ice Queen', category: 'Hero Skin', price: '1500 Gems', availability: 'Limited', imageUrl: '/assets/skins/ice_queen.png', hint: 'ice queen crown' },
    { title: 'Valkyrie Queen', category: 'Hero Skin', price: 'Gold Pass', availability: 'Past Season', imageUrl: '/assets/skins/valkyrie_queen.png', hint: 'warrior queen axe' },
  ],
  'Grand Warden': [
    { title: 'Party Warden', category: 'Hero Skin', price: 'Gold Pass', availability: 'Past Season', imageUrl: '/assets/skins/party_warden.png', hint: 'dj wizard staff' },
    { title: 'Primal Warden', category: 'Hero Skin', price: 'Gold Pass', availability: 'Past Season', imageUrl: '/assets/skins/primal_warden.png', hint: 'shaman wizard staff' },
  ],
  'Royal Champion': [
    { title: 'Gladiator Champion', category: 'Hero Skin', price: '1500 Gems', availability: 'Limited', imageUrl: '/assets/skins/gladiator_champion.png', hint: 'gladiator champion spear' },
    { title: 'Shadow Champion', category: 'Hero Skin', price: 'Gold Pass', availability: 'Past Season', imageUrl: '/assets/skins/shadow_champion.png', hint: 'ninja champion dark' },
  ],
};

const otherFeaturedItemAssets: FeaturedItem[] = [
  { title: "Magic Theater", category: "Scenery", price: '$6.99', availability: 'Shop', imageUrl: "/assets/scenery/magic_theater.png", hint: "magic theater stage" },
  { title: "Shadow Scenery", category: "Scenery", price: '$6.99', availability: 'Shop', imageUrl: "/assets/scenery/shadow_scenery.png", hint: "dark castle night" },
];

// Fisher-Yates shuffle algorithm
const shuffleArray = (array: any[]) => {
  let currentIndex = array.length, randomIndex;
  while (currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }
  return array;
};

export const getFeaturedItems = (unlockedHeroNames: string[]): FeaturedItem[] => {
    let availableSkins: FeaturedItem[] = [];
    for (const heroName of unlockedHeroNames) {
      if (skinAssets[heroName as keyof typeof skinAssets]) {
        availableSkins = availableSkins.concat(skinAssets[heroName as keyof typeof skinAssets]);
      }
    }

    const combinedPool = [...availableSkins, ...otherFeaturedItemAssets];
    const shuffled = shuffleArray(combinedPool);
    return shuffled.slice(0, 3);
};
